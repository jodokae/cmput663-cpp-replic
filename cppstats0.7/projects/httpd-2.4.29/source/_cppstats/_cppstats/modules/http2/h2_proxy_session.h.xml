<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.sdml.info/srcML/src" xmlns:cpp="http://www.sdml.info/srcML/cpp" language="C" filename="projects/httpd-2.4.29/_cppstats/_cppstats/modules/http2/h2_proxy_session.h"><cpp:if>#<cpp:directive>if</cpp:directive> <expr>!<call><name>defined</name><argument_list>(<argument><expr><name>h2_proxy_session_h</name></expr></argument>)</argument_list></call></expr></cpp:if>
<cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>h2_proxy_session_h</name></cpp:macro></cpp:define>
<cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>H2_ALEN</name><parameter_list>(<param><type><name>a</name></type></param>)</parameter_list></cpp:macro> <cpp:value>(sizeof(a)/sizeof((a)[0]))</cpp:value></cpp:define>
<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>&lt;nghttp2/nghttp2.h&gt;</cpp:file></cpp:include>
<struct_decl>struct <name>h2_proxy_iqueue</name>;</struct_decl>
<struct_decl>struct <name>h2_proxy_ihash_t</name>;</struct_decl>
<typedef>typedef <type><enum>enum <block>{
<decl><name>H2_STREAM_ST_IDLE</name></decl>,
<decl><name>H2_STREAM_ST_OPEN</name></decl>,
<decl><name>H2_STREAM_ST_RESV_LOCAL</name></decl>,
<decl><name>H2_STREAM_ST_RESV_REMOTE</name></decl>,
<decl><name>H2_STREAM_ST_CLOSED_INPUT</name></decl>,
<decl><name>H2_STREAM_ST_CLOSED_OUTPUT</name></decl>,
<decl><name>H2_STREAM_ST_CLOSED</name></decl>,
}</block></enum></type> <name>h2_proxy_stream_state_t</name>;</typedef>
<typedef>typedef <type><enum>enum <block>{
<decl><name>H2_PROXYS_ST_INIT</name></decl>,
<decl><name>H2_PROXYS_ST_DONE</name></decl>,
<decl><name>H2_PROXYS_ST_IDLE</name></decl>,
<decl><name>H2_PROXYS_ST_BUSY</name></decl>,
<decl><name>H2_PROXYS_ST_WAIT</name></decl>,
<decl><name>H2_PROXYS_ST_LOCAL_SHUTDOWN</name></decl>,
<decl><name>H2_PROXYS_ST_REMOTE_SHUTDOWN</name></decl>,
}</block></enum></type> <name>h2_proxys_state</name>;</typedef>
<typedef>typedef <type><enum>enum <block>{
<decl><name>H2_PROXYS_EV_INIT</name></decl>,
<decl><name>H2_PROXYS_EV_LOCAL_GOAWAY</name></decl>,
<decl><name>H2_PROXYS_EV_REMOTE_GOAWAY</name></decl>,
<decl><name>H2_PROXYS_EV_CONN_ERROR</name></decl>,
<decl><name>H2_PROXYS_EV_PROTO_ERROR</name></decl>,
<decl><name>H2_PROXYS_EV_CONN_TIMEOUT</name></decl>,
<decl><name>H2_PROXYS_EV_NO_IO</name></decl>,
<decl><name>H2_PROXYS_EV_STREAM_SUBMITTED</name></decl>,
<decl><name>H2_PROXYS_EV_STREAM_DONE</name></decl>,
<decl><name>H2_PROXYS_EV_STREAM_RESUMED</name></decl>,
<decl><name>H2_PROXYS_EV_DATA_READ</name></decl>,
<decl><name>H2_PROXYS_EV_NGH2_DONE</name></decl>,
<decl><name>H2_PROXYS_EV_PRE_CLOSE</name></decl>,
}</block></enum></type> <name>h2_proxys_event_t</name>;</typedef>
<typedef>typedef <type>struct <name>h2_proxy_session</name></type> <name>h2_proxy_session</name>;</typedef>
<typedef>typedef <function_decl><type><name>void</name></type> <name>h2_proxy_request_done</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>, <param><decl><type><name>request_rec</name> *</type><name>r</name></decl></param>,
<param><decl><type><name>apr_status_t</name></type> <name>status</name></decl></param>, <param><decl><type><name>int</name></type> <name>touched</name></decl></param>)</parameter_list>;</function_decl></typedef>
<struct>struct <name>h2_proxy_session</name> <block>{
<decl_stmt><decl><type><specifier>const</specifier> <name>char</name> *</type><name>id</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>conn_rec</name> *</type><name>c</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>proxy_conn_rec</name> *</type><name>p_conn</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>proxy_server_conf</name> *</type><name>conf</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_pool_t</name> *</type><name>pool</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>nghttp2_session</name> *</type><name>ngh2</name></decl>;</decl_stmt>
<expr_stmt><expr><name>unsigned</name> <name>int</name> <name>aborted</name> : 1</expr>;</expr_stmt>
<expr_stmt><expr><name>unsigned</name> <name>int</name> <name>check_ping</name> : 1</expr>;</expr_stmt>
<expr_stmt><expr><name>unsigned</name> <name>int</name> <name>h2_front</name> : 1</expr>;</expr_stmt>
<decl_stmt><decl><type><name>h2_proxy_request_done</name> *</type><name>done</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>void</name> *</type><name>user_data</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>unsigned</name> <name>char</name></type> <name>window_bits_stream</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>unsigned</name> <name>char</name></type> <name>window_bits_connection</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>h2_proxys_state</name></type> <name>state</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_interval_time_t</name></type> <name>wait_timeout</name></decl>;</decl_stmt>
<decl_stmt><decl><type>struct <name>h2_proxy_ihash_t</name> *</type><name>streams</name></decl>;</decl_stmt>
<decl_stmt><decl><type>struct <name>h2_proxy_iqueue</name> *</type><name>suspended</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_size_t</name></type> <name>remote_max_concurrent</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>int</name></type> <name>last_stream_id</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_time_t</name></type> <name>last_frame_received</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_bucket_brigade</name> *</type><name>input</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>apr_bucket_brigade</name> *</type><name>output</name></decl>;</decl_stmt>
}</block>;</struct>
<function_decl><type><name>h2_proxy_session</name> *</type><name>h2_proxy_session_setup</name><parameter_list>(<param><decl><type><specifier>const</specifier> <name>char</name> *</type><name>id</name></decl></param>, <param><decl><type><name>proxy_conn_rec</name> *</type><name>p_conn</name></decl></param>,
<param><decl><type><name>proxy_server_conf</name> *</type><name>conf</name></decl></param>,
<param><decl><type><name>int</name></type> <name>h2_front</name></decl></param>,
<param><decl><type><name>unsigned</name> <name>char</name></type> <name>window_bits_connection</name></decl></param>,
<param><decl><type><name>unsigned</name> <name>char</name></type> <name>window_bits_stream</name></decl></param>,
<param><decl><type><name>h2_proxy_request_done</name> *</type><name>done</name></decl></param>)</parameter_list>;</function_decl>
<function_decl><type><name>apr_status_t</name></type> <name>h2_proxy_session_submit</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>, <param><decl><type><specifier>const</specifier> <name>char</name> *</type><name>url</name></decl></param>,
<param><decl><type><name>request_rec</name> *</type><name>r</name></decl></param>, <param><decl><type><name>int</name></type> <name>standalone</name></decl></param>)</parameter_list>;</function_decl>
<function_decl><type><name>apr_status_t</name></type> <name>h2_proxy_session_process</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>)</parameter_list>;</function_decl>
<function_decl><type><name>void</name></type> <name>h2_proxy_session_cancel_all</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>)</parameter_list>;</function_decl>
<function_decl><type><name>void</name></type> <name>h2_proxy_session_cleanup</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>, <param><decl><type><name>h2_proxy_request_done</name> *</type><name>done</name></decl></param>)</parameter_list>;</function_decl>
<function_decl><type><name>void</name></type> <name>h2_proxy_session_update_window</name><parameter_list>(<param><decl><type><name>h2_proxy_session</name> *</type><name>s</name></decl></param>,
<param><decl><type><name>conn_rec</name> *</type><name>c</name></decl></param>, <param><decl><type><name>apr_off_t</name></type> <name>bytes</name></decl></param>)</parameter_list>;</function_decl>
<cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>H2_PROXY_REQ_URL_NOTE</name></cpp:macro> <cpp:value>"h2-proxy-req-url"</cpp:value></cpp:define>
<cpp:endif>#<cpp:directive>endif</cpp:directive></cpp:endif>
</unit>
